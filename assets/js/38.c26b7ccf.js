(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{620:function(t,a,s){"use strict";s.r(a);var r=s(15),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[t._v("#")]),t._v(" 准备")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/program/an-zhuang-xdebug-kuo-zhan.html"}},[t._v("安装 XDebug 扩展")])],1),t._v(" "),s("li",[t._v("开启 Profiler 性能跟踪器"),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[t._v(";php.ini\nxdebug.profiler_enable = 1\nxdebug.profiler_enable_trigger = 1\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])])]),t._v(" "),s("li",[t._v("下载 "),s("a",{attrs:{href:"https://github.com/jokkedk/webgrind",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webgrind"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"webgrind"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webgrind"}},[t._v("#")]),t._v(" Webgrind")]),t._v(" "),s("p",[t._v("因为 Profiler 生成的性能记录文件的格式，不是给人看的，所以需要 Webgrind 图形界面的分析工具")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",[t._v("Webgrind 本质上是一个 PHP 网站程序")])]),t._v(" "),s("h2",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),s("p",[t._v("在需要分析的 Url 后面接上 "),s("code",[t._v("?XDEBUG_PROFILE")]),t._v("，例如："),s("code",[t._v("http://localhost:8000/?XDEBUG_PROFILE")])]),t._v(" "),s("p",[t._v("然后刷新 Webgrind 网页，最新的数据就会显示")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/cnguu/pic@master/20191214/riFZIlDqRCWbvBYm.png",alt:"使用 XDebug + Webgrind 进行 PHP 程序性能分析"}})]),t._v(" "),s("h2",{attrs:{id:"选项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项"}},[t._v("#")]),t._v(" 选项")]),t._v(" "),s("h3",{attrs:{id:"show-90"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#show-90"}},[t._v("#")]),t._v(" Show 90%")]),t._v(" "),s("p",[t._v("所有被调用的函数和方法由高到低排序，然后取出耗时比率之和在 90%~100% 之间的前 N 个")]),t._v(" "),s("h3",{attrs:{id:"of-auto（newest）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#of-auto（newest）"}},[t._v("#")]),t._v(" of Auto（newest）")]),t._v(" "),s("p",[t._v("选择生成的 Profiler 文件，默认是最新一次的 XDebug 分析记录")]),t._v(" "),s("h3",{attrs:{id:"in-percent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#in-percent"}},[t._v("#")]),t._v(" in percent")]),t._v(" "),s("p",[t._v("显示百分比、毫秒或微秒")]),t._v(" "),s("h3",{attrs:{id:"四色胶囊条"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四色胶囊条"}},[t._v("#")]),t._v(" 四色胶囊条")]),t._v(" "),s("ul",[s("li",[t._v("蓝色：PHP 内置函数")]),t._v(" "),s("li",[t._v("灰色：require/include")]),t._v(" "),s("li",[t._v("绿色：方法")]),t._v(" "),s("li",[t._v("橙色：自定义函数")])]),t._v(" "),s("h3",{attrs:{id:"invocation-count"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#invocation-count"}},[t._v("#")]),t._v(" Invocation count")]),t._v(" "),s("p",[t._v("表示整个 PHP 页面从载入到执行完毕，函数被调用的总次数")]),t._v(" "),s("h3",{attrs:{id:"total-self-cost"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#total-self-cost"}},[t._v("#")]),t._v(" Total Self Cost")]),t._v(" "),s("p",[t._v("表示自身从开始到执行完毕所用消耗（不包括其他函数消耗）")]),t._v(" "),s("h3",{attrs:{id:"total-inclusive-cost"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#total-inclusive-cost"}},[t._v("#")]),t._v(" Total Inclusive Cost")]),t._v(" "),s("p",[t._v("表示自身从开始到执行完毕所用消耗（包括其他函数消耗）")]),t._v(" "),s("h3",{attrs:{id:"calls"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#calls"}},[t._v("#")]),t._v(" Calls")]),t._v(" "),s("p",[t._v("表示自身调用并执行的所有函数/方法名、次数及耗时")]),t._v(" "),s("h3",{attrs:{id:"total-call-cost"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#total-call-cost"}},[t._v("#")]),t._v(" Total Call Cost")]),t._v(" "),s("p",[t._v("表示被调用执行的总耗时")]),t._v(" "),s("h3",{attrs:{id:"count"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#count"}},[t._v("#")]),t._v(" Count")]),t._v(" "),s("p",[t._v("表示被调用执行的次数")]),t._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("对公司现后台分析，果然，最耗时的还是数据库部分")])])}),[],!1,null,null,null);a.default=e.exports}}]);