(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{602:function(t,e,s){"use strict";s.r(e);var a=s(15),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"简介"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("frp")]),t._v(" 是一个可用于内网穿透的高性能的反向代理应用，支持 "),s("code",[t._v("tcp")]),t._v("，"),s("code",[t._v("udp")]),t._v("，"),s("code",[t._v("http")]),t._v("，"),s("code",[t._v("https")]),t._v("，"),s("code",[t._v("stcp")]),t._v(" 协议。")]),t._v(" "),s("li",[s("code",[t._v("frp")]),t._v(" 需要服务端和客户端共同作用，服务端为 "),s("code",[t._v("frps")]),t._v("，一般安装在 vps 服务器上；客户端为 "),s("code",[t._v("frpc")]),t._v("，一般安装在路由器或 NAS 上。")]),t._v(" "),s("li",[s("code",[t._v("frps")]),t._v(" 和 "),s("code",[t._v("frpc")]),t._v(" 配置使用，可以远程访问或控制内网设备。")])]),t._v(" "),s("h2",{attrs:{id:"frps-一键安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#frps-一键安装"}},[t._v("#")]),t._v(" frps 一键安装")]),t._v(" "),s("p",[t._v("为了节省精力，这里使用 "),s("a",{attrs:{href:"https://github.com/clangcn/onekey-install-shell/tree/master/frps",target:"_blank",rel:"noopener noreferrer"}},[t._v("clangcn"),s("OutboundLink")],1),t._v(" 的一键安装脚本")]),t._v(" "),s("p",[t._v("支持的平台：")]),t._v(" "),s("ul",[s("li",[t._v("Centos 6/7 32/64bit")]),t._v(" "),s("li",[t._v("Debian 6/7 32/64bit")]),t._v(" "),s("li",[t._v("Ubuntu 14 32/64bit")])]),t._v(" "),s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),s("p",[t._v("下载脚本")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" --no-check-certificate https://raw.githubusercontent.com/clangcn/onekey-install-shell/master/frps/install-frps.sh -O ./install-frps.sh\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("修改权限")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("700")]),t._v(" ./install-frps.sh\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("开始安装")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("$ ./install-frps.sh "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("安装过程选项的说明")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("选项")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("说明")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("默认")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("download_url")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("frp 镜像源下载地址")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("aliyun")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("bind_port")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("frp 提供服务的端口")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("5443")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("vhost_http_port")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("http 服务端口")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("80")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("vhost_https_port")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("https 服务端口")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("443")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("dashboard_port")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("frps 仪表盘端口，用于查看 frp 工作状态")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("6443")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("dashboard_user")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("仪表盘登录账号")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("admin")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("dashboard_pwd")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("仪表盘登录密码")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("随机")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("token")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("frps 和 frpc 通讯密码")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("随机")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("max_pool_count")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("每个代理的连接上线")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("50")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("log_level")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("日志等级")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("info")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("log_max_days")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("日志保留天数")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("3")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("log_file")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("是否开启日志")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("enable")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("tcp_mux")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("是否开启多路复用，减少 tcp 的握手延迟")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("enable")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("kcp support")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("是否开启 kcp")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("enable")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("注意设置安全组或者防火墙")])]),t._v(" "),s("h3",{attrs:{id:"功能命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#功能命令"}},[t._v("#")]),t._v(" 功能命令")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}},[t._v("命令")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("frps start")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("启动")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("frps stop")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("停止")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("frps restart")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("重启")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("frps status")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("当前服务状态")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("frps config")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("vi 编辑配置")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("frps version")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("查看版本")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("install-frps.sh update")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("更新脚本")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("install-frps.sh uninstall")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("卸载")])])])]),t._v(" "),s("h2",{attrs:{id:"fprc-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fprc-配置"}},[t._v("#")]),t._v(" fprc 配置")]),t._v(" "),s("p",[t._v("客户端以 "),s("code",[t._v("Windows")]),t._v(" 系统为例，路由器或者 NAS 的对照参考即可")]),t._v(" "),s("h3",{attrs:{id:"下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[t._v("#")]),t._v(" 下载")]),t._v(" "),s("p",[t._v("在这里 "),s("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("frp"),s("OutboundLink")],1),t._v(" 下载对应 "),s("code",[t._v("frps")]),t._v(" 的版本")]),t._v(" "),s("p",[t._v("下载后只需要这三个文件即可")]),t._v(" "),s("ul",[s("li",[t._v("frpc.exe")]),t._v(" "),s("li",[t._v("frpc.ini")]),t._v(" "),s("li",[t._v("frpc_full.ini")])]),t._v(" "),s("h3",{attrs:{id:"配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),s("p",[t._v("修改 "),s("code",[t._v("frpc.ini")]),t._v(" 文件")]),t._v(" "),s("div",{staticClass:"language-yaml line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nserver_addr = xxxxxx    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 服务器 IP")]),t._v("\nserver_port = 5443      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# bind_port")]),t._v("\ntoken = xxxxxx          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 与服务器一致")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ntype = http             "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 类型")]),t._v("\nlocal_ip = 127.0.0.1    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地 IP")]),t._v("\nlocal_port = 80         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 本地端口")]),t._v("\nuse_encryption = true   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 传输加密")]),t._v("\nuse_gzip = true         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gzip 压缩")]),t._v("\ncustom_domains = xxxxxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自定义域名")]),t._v("\nhttp_user = xxxxxx      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选，访问账号")]),t._v("\nhttp_pwd = xxxxxx       "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 可选，访问密码")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("test2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ntype =\nlocal_ip =\nlocal_port =\nuse_encryption =\nuse_gzip =\ncustom_domains =\nhttp_user =\nhttp_pwd =\n\nlog_file = /dev/null\nlog_level = info\nlog_max_days = 3\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br")])]),s("h3",{attrs:{id:"启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[t._v("#")]),t._v(" 启动")]),t._v(" "),s("p",[t._v("打开 "),s("code",[t._v("cmd")]),t._v("，运行 "),s("code",[t._v("frpc.exe")]),t._v(" 即可")]),t._v(" "),s("h2",{attrs:{id:"nginx-端口转发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-端口转发"}},[t._v("#")]),t._v(" Nginx 端口转发")]),t._v(" "),s("p",[s("code",[t._v("80")]),t._v(" 端口被 "),s("code",[t._v("Nginx")]),t._v(" 占用的情况下，利用 "),s("code",[t._v("Nginx")]),t._v(" 进行端口转发")]),t._v(" "),s("p",[t._v("这里 "),s("code",[t._v("7080")]),t._v(" 是 "),s("code",[t._v("frps")]),t._v(" 的 "),s("code",[t._v("http")]),t._v(" 服务端口")]),t._v(" "),s("p",[t._v("添加站点文件 "),s("code",[t._v("test.conf")]),t._v("，内容如下：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("server\n    {\n        listen 80;\n        server_name www.cnguu.cn;\n        location / {\n            proxy_pass http://127.0.0.1:7080;\n            proxy_redirect off;\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        }\n        access_log off;\n        error_log /dev/null;\n    }\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])])])}),[],!1,null,null,null);e.default=n.exports}}]);