(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{604:function(s,t,n){"use strict";n.r(t);var a=n(15),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),n("div",{staticClass:"custom-block primary"},[n("p",[s._v("原创不易，转载望添加原文链接，十分感谢！")])]),s._v(" "),n("p",[s._v("适合人群：")]),s._v(" "),n("ul",[n("li",[s._v("专注写作")]),s._v(" "),n("li",[s._v("无个人服务器")])]),s._v(" "),n("p",[s._v("理论上适用于所有静态托管的博客程序，本文以 VuePress 为例说明")]),s._v(" "),n("p",[s._v("如有疑问，欢迎加入 VuePress 社区交流 QQ 群（见页脚）")]),s._v(" "),n("blockquote",[n("p",[s._v("服务依赖 "),n("a",{attrs:{href:"https://coding.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Coding 团队版"),n("OutboundLink")],1),s._v("，感谢 Coding 提供的免费构建服务！")])]),s._v(" "),n("h3",{attrs:{id:"什么是自动化部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#什么是自动化部署"}},[s._v("#")]),s._v(" 什么是自动化部署")]),s._v(" "),n("p",[s._v("简单来说，你的操作只有保存文章，编译与部署等环节，皆交由程序自动完成，让自动化工作流解放你的双手吧！")]),s._v(" "),n("h3",{attrs:{id:"为什么需要自动化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要自动化"}},[s._v("#")]),s._v(" 为什么需要自动化")]),s._v(" "),n("p",[s._v("专注写作，无需等待编译部署，结合 "),n("a",{attrs:{href:"https://cloudstudio.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Cloud Studio"),n("OutboundLink")],1),s._v(" 在线编辑器，随时随地写博客")]),s._v(" "),n("h2",{attrs:{id:"源仓库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#源仓库"}},[s._v("#")]),s._v(" 源仓库")]),s._v(" "),n("p",[s._v("源仓库保存的是整个博客源程序，非常重要，注意备份")]),s._v(" "),n("ol",[n("li",[s._v("注册 "),n("a",{attrs:{href:"https://coding.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Coding 团队版"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("新建项目：vuepress-blog")]),s._v(" "),n("li",[s._v("创建代码仓库：vuepress-blog（一个项目可以有多个仓库）")])]),s._v(" "),n("h2",{attrs:{id:"coding-托管"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#coding-托管"}},[s._v("#")]),s._v(" Coding 托管")]),s._v(" "),n("ol",[n("li",[s._v("创建代码仓库：cnguu.coding.me")]),s._v(" "),n("li",[s._v("新建静态网站（自行自定义域名）")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/cnguu/pic@master/20191226/HheLtxfMzl98EiCP.png",alt:"静态博客自动化部署教程"}})]),s._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[s._v("新建构建计划")])]),s._v(" "),n("ul",[n("li",[s._v("计划名称：部署博客")]),s._v(" "),n("li",[s._v("代码源：Coding")]),s._v(" "),n("li",[s._v("代码仓库：vuepress-blog")]),s._v(" "),n("li",[s._v("配置来源：自定义构建过程")])]),s._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[s._v("流程配置（Jenkinsfile）")])]),s._v(" "),n("p",[s._v("注意，高亮行需要替换成自己的信息")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[s._v(" ")]),n("br"),n("div",{staticClass:"highlighted"},[s._v(" ")]),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[s._v(" ")]),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pipeline {\n  agent any\n  stages {\n    stage('检出') {\n      steps {\n        checkout([$class: 'GitSCM',branches: [[name: env.GIT_BUILD_REF]],userRemoteConfigs: [[url: env.GIT_REPO_URL, credentialsId: env.CREDENTIALS_ID]]])\n      }\n    }\n    stage('环境') {\n      steps {\n        echo '安装中...'\n        sh 'yarn install'\n        echo '安装完成.'\n      }\n    }\n    stage('构建') {\n      steps {\n        echo '构建中...'\n        sh 'yarn build'\n        echo '构建完成.'\n      }\n    }\n    stage('部署') {\n      steps {\n        echo '部署中...'\n        dir(path: '编译输出目录名称') {\n          script {\n            writeFile(file: 'CNAME', text: '域名')\n            sh 'git init'\n            sh 'git add -A'\n            sh 'git commit -m deploy'\n            sh \"git push -f https://${PROJECT_TOKEN_GK}:${PROJECT_TOKEN}@e.coding.net/团队名称/项目名称/仓库名称.git HEAD:master\"\n          }\n        }\n        echo '部署完成'\n      }\n    }\n  }\n}\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("div",{staticClass:"custom-block tip"},[n("p",[s._v("域名不是通过 CNAME 方式解析的，可以去掉行 28")])]),s._v(" "),n("ol",{attrs:{start:"5"}},[n("li",[s._v("变量与缓存，勾选 "),n("code",[s._v("项目目录")]),s._v(" 和 "),n("code",[s._v("npm")])])]),s._v(" "),n("h2",{attrs:{id:"github-托管"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#github-托管"}},[s._v("#")]),s._v(" GitHub 托管")]),s._v(" "),n("ol",[n("li",[s._v("新增 GitHub 个人授权令牌："),n("a",{attrs:{href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer"}},[s._v("链接"),n("OutboundLink")],1)]),s._v(" "),n("li",[s._v("新建构建计划，修改 Jenkinsfile 配置")])]),s._v(" "),n("ul",[n("li",[s._v("行 32： "),n("code",[s._v('sh "git push -f https://GitHub的用户名:GitHub的个人授权令牌@github.com/GitHub的用户名称/GitHub的仓库名称.git HEAD:master"')])])]),s._v(" "),n("h2",{attrs:{id:"最终效果"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#最终效果"}},[s._v("#")]),s._v(" 最终效果")]),s._v(" "),n("p",[s._v("写一篇文章，通过 Git 保存到源仓库")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/cnguu/pic@master/20191226/z3DSEkb8MtIfrviB.png",alt:"静态博客自动化部署教程"}})]),s._v(" "),n("p",[s._v("提交成功后，等待几分钟，然后去 Coding 后台查看结果")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/cnguu/pic@master/20191226/hU2c7m5izonSaJjs.png",alt:"静态博客自动化部署教程"}})]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/cnguu/pic@master/20191226/uRwr9hBeFP6xfKp1.png",alt:"静态博客自动化部署教程"}})]),s._v(" "),n("p",[s._v("成功后，打开自己的博客，兴奋地发现，博客已经更新了！🎉")])])}),[],!1,null,null,null);t.default=r.exports}}]);